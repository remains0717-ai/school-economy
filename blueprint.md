# Blueprint: 모의 경제 시뮬레이션

## 개요

이 프로젝트는 사용자가 경제 활동을 시뮬레이션하고 시장 변동에 대응할 수 있는 대화형 웹 기반 모의 경제 게임입니다. 이제 실시간 주식 차트와 포트폴리오 관리 기능이 통합된 전문적인 증권 거래 환경을 제공합니다.

## 스타일, 디자인 및 기능

*   **UI:** 깨끗하고 현대적인 UI, 어두운 테마, 네온 효과. TradingView 위젯을 활용한 실시간 차트 제공. 우측 상단에 로그인 및 회원가입 기능 포함.
*   **사용자 인증:** 
    *   **계정 유형:** 관리자(Admin) 계정과 사용자(학생) 계정 구분.
    *   **기능 제한:** 관리자는 시뮬레이션 설정 및 전체 자산 모니터링 가능, 학생은 개인 경제 활동 중심.
*   **레이아웃:** 사이드바 내비게이션을 통한 다중 뷰 전환. 증권 메뉴 아래 하위 메뉴(모의 주식 투자, 투자 수익률) 포함.

## 현재 계획

1.  **인증 시스템 구현:** Firebase Authentication을 통한 사용자 로그인/회원가입 기능 구현. (완료)
2.  **데이터베이스 연동:** Firebase Firestore를 사용하여 사용자별 자산 데이터(현금, 예금, 주식 등) 서버 저장. (완료)
3.  **계정 권한 로직:** Firestore의 사용자 문서를 통한 관리자/학생 역할 구분 및 UI 제어. (완료)
4.  **자산 관리 로직 개선:**
    *   예금 시 보유 현금 범위를 초과할 수 없도록 검증 로직 강화. (완료)
    *   예금 목록이 덮어씌워지지 않고 독립적으로 쌓이도록 데이터 구조 및 UI 리스너 관리 최적화. (완료)
    *   자산 변경 시 홈 메뉴 및 자산 관리 메뉴에 실시간 반영되도록 동기화 로직 수정. (완료)
5.  **대출 시스템 고도화:**
    *   '중앙 은행 대출'을 '은행 대출'로 명칭 변경 및 UI 가독성 개선. (완료)
    *   대출 신청 시 개별 대출 내역을 저장하고 목록으로 표시하는 기능 추가. (완료)
    *   대출 경과 시간에 따른 실시간 이자 계산 및 개별 상환 기능 구현. (완료)
    *   홈 화면 및 관리자 자산 관리 메뉴에 미상환 대출액 표시 및 연동. (완료)
6.  **전문가급 주식 투자 시스템:**
    *   TradingView 위젯 통합을 통한 실시간 주식 차트 및 데이터 제공. (완료)
    *   상단 와이드 차트 및 하단 가로형 매수/매도 UI 레이아웃 개편. (완료)
    *   오늘 날짜(2026-02-02) 기준 시장가 동기화 및 환율 시뮬레이션 적용. (완료)
    *   불필요한 인기 종목 섹션 제거 및 종목 검색 기능 최적화. (완료)
7.  **상점 및 인벤토리 시스템:**
    *   학급 운영 하위 메뉴로 '상점 관리' 신설. (완료)
    *   관리자: 물품 종류(카테고리), 명칭, 수량, 가격 설정 및 실시간 재고 관리. (완료)
    *   학생: 상점 메뉴에서 현금으로 물품 구매, 부족 시 경고 팝업. (완료)
    *   구매 시 실시간 재고 차감 및 개인 인벤토리(가방) 자동 연동. (완료)
8.  `index.html`: Firebase SDK 로드 및 인증 UI 요소 추가. (완료)
6.  `style.css`: 인증 모달 및 사용자 정보 레이아웃 스타일 적용. (완료)
7.  `main.js`: Firebase 초기화, AuthManager 및 EconomicSimulation 리팩토링 및 리스너 누수 방지 로직 적용. (완료)
8.  **GitHub 배포:** 변경사항을 깃허브 리포지토리에 반영. (진행 중)
